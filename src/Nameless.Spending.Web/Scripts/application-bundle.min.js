/*global angular*/

(function () {
    'use strict';

    angular
		.module('App', [
			'ngAnimate',
			'ngAria',
			'ngCookies',
			'ngMessages',
			'ngResource',
			'ngRoute',
			'ngSanitize',
			'ngTouch',
			'angular-loading-bar',
			'LocalStorageModule'
		]);
}());
/*global angular*/

(function () {
	'use strict';

	angular
		.module('App')
		.config(['$routeProvider', '$locationProvider', '$httpProvider', function ($routeProvider, $locationProvider, $httpProvider) {
			/* Define routes ---------------------------------------------------------- */

			/* ApplicationController ------------------------------------------------- */
			$routeProvider
				.when('/error', {
					controller: 'ApplicationController',
					templateUrl: '/views/shared/error.html'
				});

			/* HomeController -------------------------------------------------------- */
			$routeProvider
				.when('/home', {
					controller: 'IndexController',
					templateUrl: '/views/home/index.html'
				});

			/* BudgetController ------------------------------------------------------ */
			$routeProvider
				.when('/budget', {
					controller: 'ListBudgetController',
					templateUrl: '/views/budget/list.html'
				})
				.when('/budget/new', {
					controller: 'NewBudgetController',
					templateUrl: '/views/budget/new.html'
				})
				.when('/budget/delete', {
					controller: 'DeleteBudgetController',
					templateUrl: '/views/budget/delete.html'
				});

			/* FundSourceController -------------------------------------------------- */
			$routeProvider
				.when('/fundsource', {
					controller: 'ListFundSourceController',
					templateUrl: '/views/fundsource/list.html'
				})
				.when('/fundsource/new', {
					controller: 'NewFundSourceController',
					templateUrl: '/views/fundsource/new.html'
				})
				.when('/fundsource/delete', {
					controller: 'DeleteFundSourceController',
					templateUrl: '/views/fundsource/delete.html'
				});

			$routeProvider.otherwise({ redirectTo: '/error' });

			/* Configure location ---------------------------------------------------- */
			$locationProvider.html5Mode({
				enabled: false,
				requireBase: false
			});
		}]);
}());
/*global angular*/

(function () {
	'use strict';

	angular
		.module('App')
		.run(['$rootScope', 'TranslationService', function ($rootScope, translationService) {
			translationService.defineTranslationDelegate($rootScope);
		}]);
}());
/*global angular*/

(function () {
	'use strict';

	/* Define controllers ************************************************** */
	angular
		.module('App')
		.controller('ListBudgetController', ListBudgetController)
		.controller('NewBudgetController', ListBudgetController);
	/* ************************************************** Define controllers */

	/* List Controller ***************************************************** */
	ListBudgetController.$inject = ['$scope', 'BudgetService'];

	function ListBudgetController($scope, budgetService) {
		/* Public Methods ************************************************** */
		$scope.getBudgets = function () {

		};
		/* ************************************************** Public Methods */
	};
	/* ***************************************************** List Controller */

	/* New Controller ****************************************************** */
	NewBudgetController.$inject = ['$scope', 'BudgetService'];

	function NewBudgetController($scope, BudgetService) {
		/* Public Fields *************************************************** */
		$scope.budget = {
			description: '',
			period: {
				month: 0,
				year: 0
			},
			items: []
		};
		/* *************************************************** Public Fields */

		/* Public Methods ************************************************** */
		$scope.addNewBudgetItem = function (budgetItem) {
			$scope.budget.items.push(angular.copy(budgetItem));
		};

		$scope.removeBudgetItem = function (idx) {
			if ($scope.budget.items[idx] !== undefined) {
				$scope.budget.items.splice(idx, 1);
			}
		};

		$scope.saveBudget = function () {
			budgetService
				.add(angular.copy($scope.budget))
				.success(function (data) { })
				.error(function () { });
		};
		/* ************************************************** Public Methods */
	};
	/* ****************************************************** New Controller */
}());
/*global angular*/

(function () {
	'use strict';

	/* Define controllers ************************************************** */
	angular
		.module('App')
		.controller('CategoryController', CategoryController);
	/* ************************************************** Define controllers */

	/* Category Controller ************************************************* */
	CategoryController.$inject = ['$scope'];

	function CategoryController($scope) {
	};
	/* ************************************************* Category Controller */
}());
/*global angular*/

(function () {
	'use strict';

	/* Define controllers ************************************************** */
	angular
		.module('App')
		.controller('CreditController', CreditController);
	/* ************************************************** Define controllers */

	/* Credit Controller *************************************************** */
	CreditController.$inject = ['$scope'];

	function CreditController($scope) {
	};
	/* *************************************************** Credit Controller */
}());
/*global angular*/

(function () {
	'use strict';

	/* Define controllers ************************************************** */
	angular
		.module('App')
		.controller('DebitController', DebitController);
	/* ************************************************** Define controllers */

	/* Debit Controller **************************************************** */
	DebitController.$inject = ['$scope'];

	function DebitController($scope) {
	};
	/* **************************************************** Debit Controller */
}());
/*global angular*/

(function () {
	'use strict';

	/* Define controllers ************************************************** */
	angular
		.module('App')
		.controller('HomeController', HomeController);
	/* ************************************************** Define controllers */

	/* Home Controller ***************************************************** */
	HomeController.$inject = ['$scope'];

	function HomeController($scope) {
	};
	/* ***************************************************** Home Controller */
}());
/*global angular*/

(function () {
	'use strict';

	/* Translation Service ----------------------------------------------------------- */
	angular
		.module('App')
		.service('TranslationService', ['$cookies', '$resource', '$http', function ($cookies, $resource, $http) {
			/* Fields ---------------------------------------------------------------- */
			var self = this;

			/* Public Methods -------------------------------------------------------- */
			self.defineTranslationDelegate = function (scope) {
				var lang        = ($cookies.lang || 'pt-br'),
					translation = null;

				$http.get('api/translation/?cultureName=' + lang, { cache: true })
					.success(function (data, status, headers, config) {
						translation = data;
						/* inject translation into $scope */
						scope.T = function (message, args) {
							var result = '',
								json = (typeof message === 'object');

							if (translation === null) {
								return json ? message.id : message;
							}

							result = json
								? translation[message.scope][message.id] || message.id
								: translation[''][message] || message;

							return args !== undefined
								? String.format(result, args)
								: result;
						};
					});
			};
		}]);
}());